<!-- <!DOCTYPE html>
<html>
  <head>
    <title>Ã–dÃ¼nÃ§ AlÄ±nanalar</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width , initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        margin: 0;
        padding: 0;
        height: 100vh;
        background-image: url("static/background.png");
        background-size: cover;
        background-position: center;
        display: flex;
        flex-direction: column;
        gap: 20px;
        justify-content: center;
        align-items: center;
        font-family: "Poppins", sans-serif;
      }

      h1 {
        color: #987654;
        margin-bottom: 50px;
        font-size: 45px;
      }

      .button {
        background-color: #987654;
        color: #333;
        border: none;
        padding: 10px 30px;
        font-size: 20px;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 220px;
        align-self: center;
      }
      .button:hover {
        background-color: #4caf50;
        /* color: white; */
        transform: scale(1.05);
      }
      a {
        display: block;
        margin-top: 10px;
        color: wheat;
        text-decoration: none;
      }

      a:hover {
        color: #4caf50;
      }
    </style>
  </head>
  <body class="bg-gray-100 p-6">
    <h1 class="text-2xl font-bold mb-4">Ã–dÃ¼nÃ§ AlÄ±nan Kitaplar</h1>
    <table class="w-full border border-gray-300 bg-white shadow-md rounded-lg">
      <thead class="bg-gray-200">
        <tr>
          <th class="p-2 text-left">KullanÄ±cÄ±</th>
          <th class="p-2 text-left">Kitap</th>
          <th class="p-2 text-left">AlÄ±ÅŸ Tarihi</th>
          <th class="p-2 text-left">Ä°ade Tarihi</th>
           <th class="p-2 text-left">Ä°ade Gereken Tarih</th> 
          <th class="p-2 text-left">Gecikme (gÃ¼n)</th>
          <th class="p-2 text-left">Ceza (â‚º)</th>
        </tr>
      </thead>
      <tbody>
        {% for o in oduncler %}
        <tr class="border-t">
          <td class="p-2">{{ o.kullanici }}</td>
          <td class="p-2">{{ o.kitap }}</td>
          <td class="p-2">{{ o.alis_tarihi }}</td>
          <td class="p-2">{{ o.iade_tarihi }}</td>
          <td class="p-2">{{ o.iade_gereken_tarih }}</td>
          <td class="p-2">{{ o.gecikme_gun }}</td>
          <td class="p-2 {% if o.ceza > 0 %}text-red-500 font-bold{% endif %}">
            {{ o.ceza }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <a href="personel_panel">Geri DÃ¶n</a>

    <script>
      setTimeout(() => {
        const flash = document.getElementById("flash-message");
        if (flash) {
          flash.style.transition = "opacity 0.5s ease";
          flash.style.opacity = 0;
          setTimeout(() => flash.remove(), 500);
        }
      }, 3000);
    </script>
  </body>
</html> -->
<!DOCTYPE html>
<html>
  <head>
    <title>KitaplarÄ±m</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width , initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        margin: 0;
        padding: 0;
        height: 100vh;
        background-image: url("static/background.png");
        background-size: cover;
        background-position: center;
        display: flex;
        flex-direction: column;
        gap: 20px;
        justify-content: center;
        align-items: center;
        font-family: "Poppins", sans-serif;
      }

      h1 {
        color: #987654;
        margin-bottom: 50px;
        font-size: 45px;
      }

      .button {
        background-color: #987654;
        color: #333;
        border: none;
        padding: 10px 30px;
        font-size: 20px;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 220px;
        align-self: center;
      }
      .button:hover {
        background-color: #4caf50;
        /* color: white; */
        transform: scale(1.05);
      }
      a {
        display: block;
        margin-top: 10px;
        color: wheat;
        text-decoration: none;
      }

      a:hover {
        color: #4caf50;
      }
    </style>
  </head>
  <body class="bg-gray-100 p-6">
    <div class="max-w-6xl mx-auto mt-10 bg-white shadow-lg rounded-xl p-6">
      <h1 class="text-2xl font-bold mb-4 text-center text-blue-700">
        ðŸ“š Ã–dÃ¼nÃ§ AlÄ±nan Kitaplar
      </h1>

      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div
        class="p-3 mb-3 rounded-lg text-white {% if category == 'success' %}bg-green-500 {% elif category == 'warning' %}bg-yellow-500 {% elif category == 'danger' %}bg-red-500 {% else %}bg-blue-500{% endif %}"
      >
        {{ message }}
      </div>
      {% endfor %} {% endif %} {% endwith %}

      <table class="w-full border border-gray-300 rounded-lg overflow-hidden">
        <thead class="bg-blue-100">
          <tr>
            <th class="px-4 py-2 text-left">KullanÄ±cÄ±</th>
            <th class="px-4 py-2 text-left">Kitap</th>
            <th class="px-4 py-2 text-left">AlÄ±ÅŸ Tarihi</th>
            <th class="px-4 py-2 text-left">Ä°ade Tarihi</th>
            <th class="px-4 py-2 text-left">Durum</th>
            <th class="px-4 py-2 text-left">Ceza (â‚º)</th>
            <th class="px-4 py-2 text-center">Ä°ÅŸlem</th>
          </tr>
        </thead>
        <tbody>
          {% for odunc in oduncler %}
          <tr class="border-t hover:bg-gray-50">
            <td class="px-4 py-2">
              {{ odunc.user.isim if odunc.user else 'Bilinmiyor' }}
            </td>
            <td class="px-4 py-2">{{ odunc.book.baslik }}</td>
            <td class="px-4 py-2">{{ odunc.alis_tarihi.date() }}</td>
            <td class="px-4 py-2">
              {% if odunc.iade_tarihi %} {{ odunc.iade_tarihi.date() }} {% else
              %} - {% endif %}
            </td>
            <td class="px-4 py-2">
              {% if odunc.durum == 'beklemede' %}
              <span class="text-yellow-600 font-semibold">Beklemede</span>
              {% elif odunc.durum == 'onaylandÄ±' %}
              <span class="text-green-600 font-semibold">OnaylandÄ±</span>
              {% elif odunc.durum == 'reddedildi' %}
              <span class="text-red-600 font-semibold">Reddedildi</span>
              {% elif odunc.durum == 'iade edildi' %}
              <span class="text-gray-600 font-semibold">Ä°ade Edildi</span>
              {% endif %}
            </td>
            <td class="px-4 py-2">{{ "%.2f"|format(odunc.ceza) }}</td>
            <td class="px-4 py-2 text-center">
              {% if odunc.durum == 'onaylandÄ±' %}
              <form
                action="{{ url_for('iade_al', odunc_id=odunc.id) }}"
                method="post"
              >
                <button
                  type="submit"
                  class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600"
                >
                  Ä°ade Al
                </button>
              </form>
              {% else %} - {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <a href="personel_panel">Geri DÃ¶n</a>

    <script>
      setTimeout(() => {
        const flash = document.getElementById("flash-message");
        if (flash) {
          flash.style.transition = "opacity 0.5s ease";
          flash.style.opacity = 0;
          setTimeout(() => flash.remove(), 500);
        }
      }, 3000);
    </script>
  </body>
</html>
